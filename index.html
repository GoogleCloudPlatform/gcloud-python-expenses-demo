
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cloud Datastore Narrative / Example Application &mdash; gcloud-python-expenses-demo 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="gcloud-python-expenses-demo 0.1 documentation" href="#" />
    <link rel="next" title="Datastore Operatations" href="datastore.html" /> 
  </head>
  <body role="document" class="two-column docs"><a href="https://github.com/GoogleCloudPlatform/gcloud-python"><img style="position: absolute; top: 0; right: 0; border: 0; z-index: 999;" src="_static/forkme.png" alt="Fork me on GitHub"></a>
    <div id="sandbar">
      <header id="gc-googlebar">
      <a id="gc-logo" href="#">
        <img src="_static/cloudplatform-horizontal.png" alt="Google">
        </a>
        <form class="gc-search" action="search.html" method="GET">
          <div class="searchbox" style="width: 429px;">
            <span class="button button-blue mini">Google Cloud Python API</span>
            <input type="hidden" name="check_keywords" value="yes">
            <input type="hidden" name="area" value="default">
            <input type="text" name="q" class="q" id="q" value=""
              placeholder="Search" autocomplete="off" style="width: 263px;">
          </div>
          <button class="button button-blue" style="top: 0px; left: 444px;">
          <img src="_static/search.png" alt="Search">
        </button>

        <input type="hidden" name="p" id="search_project" value="/compute">

      </form>
      </header>
    </div>
    
<div id="gc-wrapper">
  <div id="gc-appbar">
    <h1><a href="#">gcloud-python-expenses-demo 0.1 documentation</a></h1>
  </div>
    <div id="gc-main" class="main">
      <div id="gc-sidebar" class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<nav class="gc-toc">
  <ul><li><a href="#">gCloud Documentation</a></li></ul>
  <ul>
<li><a class="reference internal" href="#">Cloud Datastore Narrative / Example Application</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#implementation-review">Implementation Review</a></li>
</ul>
</li>
</ul>

  </nav>

            <h3>All API Docs</h3>
            <nav class="gc-toc">
            <ul>
<li class="toctree-l1"><a class="reference internal" href="datastore.html">Datastore Operatations</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage Operatations</a></li>
</ul>

            </nav>
            
            
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main" id="gc-content">
            
  <div class="section" id="cloud-datastore-narrative-example-application">
<h1>Cloud Datastore Narrative / Example Application<a class="headerlink" href="#cloud-datastore-narrative-example-application" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>In order to give a better feel for how a Python application might use the
<code class="xref py py-mod docutils literal"><span class="pre">gcloud.datastore</span></code> API, let&#8217;s look at building an example application
which stores its data using the API.  In order to focus on the API, the
sample application will be built as a set of command-line scripts.</p>
<p>For our example, let&#8217;s build an employee expense reporting system.  An example
set of interactions might look like the following scenario.</p>
<p>Returning from a trip to the Bay Area, Sally creates a CSV file,
<code class="docutils literal"><span class="pre">expenses-20140901.csv</span></code>, containing one row for each line item in her
expense report:</p>
<div class="highlight-none"><div class="highlight"><pre>&quot;Date&quot;,&quot;Vendor&quot;,&quot;Type&quot;,&quot;Quantity&quot;,&quot;Price&quot;,&quot;Memo&quot;
&quot;2014-08-26&quot;,&quot;United Airlines&quot;,&quot;Travel&quot;,1,425.00,&quot;Airfaire, IAD &lt;-&gt; SFO&quot;
&quot;2014-08-27&quot;,&quot;Yellow Cab&quot;,&quot;Travel&quot;,32.00,&quot;Taxi to IAD&quot;
...
</pre></div>
</div>
<p>Sally then submits her expense report from the command line using our
<strong class="program">submit_expenses</strong> script (see <a class="reference internal" href="datastore.html#create-expense-report"><em>Creating a New Expense Report</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>submit_expenses create --employee-id<span class="o">=</span>sally --description<span class="o">=</span><span class="s2">&quot;Frotz project kickoff, San Jose&quot;</span> expenses-20140901.csv
Processed <span class="m">15</span> rows.
Created report: sally/expenses-20140901
</pre></div>
</div>
<p>Sally can upload photos of receipts for her expense report using our
<strong class="program">expense_receipts</strong> script (see <a class="reference internal" href="storage.html#upload-expense-receipts"><em>Uploading Expense Receipts</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>expense_receipts upload sally expenses-20140901 yellow_cab-20140827.jpg
Employee-ID: sally
Report-ID: expenses-20140901

Uploaded: sally/expenses-20140901/yellow_cab-20140827.jpg
</pre></div>
</div>
<p>Sally can list receipts for her expense report
(see <a class="reference internal" href="storage.html#list-expense-receipts"><em>Listing Expense Receipts</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>expense_receipts list sally expenses-20140901
Employee-ID: sally
Report-ID: expenses-20140901

Receipt: yellow_cab-20140827.jpg
</pre></div>
</div>
<p>and download one of them (see <a class="reference internal" href="storage.html#download-expense-receipts"><em>Downloading Expense Receipts</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>expense_receipts download sally expenses-20140901 yellow_cab-20140827.jpg
Saved to file:  yellow_cab-20140827.jpg
</pre></div>
</div>
<p>or delete one of them (see <a class="reference internal" href="storage.html#delete-expense-receipts"><em>Deleting Expense Receipts</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>expense_receipts delete sally expenses-20140901 yellow_cab-20140827.jpg
Deleted:  yellow_cab-20140827.jpg
</pre></div>
</div>
<p>Sally can list all her submitted expense reports using our
<strong class="program">review_expenses</strong> script (see <a class="reference internal" href="datastore.html#list-expense-reports"><em>Listing Expense Reports</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>review_expenses list --employee-id<span class="o">=</span>sally

<span class="s2">&quot;Employee ID&quot;</span>, <span class="s2">&quot;Report ID&quot;</span>,<span class="s2">&quot;Created&quot;</span>,<span class="s2">&quot;Updated&quot;</span>,<span class="s2">&quot;Description&quot;</span>,<span class="s2">&quot;Status&quot;</span>,<span class="s2">&quot;Memo&quot;</span>
<span class="s2">&quot;sally&quot;</span>,<span class="s2">&quot;expenses-2013-11-19&quot;</span>,<span class="s2">&quot;2013-12-01&quot;</span>,<span class="s2">&quot;2013-12-01&quot;</span>,<span class="s2">&quot;Onsite Training, Mountain View&quot;</span>,<span class="s2">&quot;Paid&quot;</span>,<span class="s2">&quot;Check #3715&quot;</span>
<span class="s2">&quot;sally&quot;</span>,<span class="s2">&quot;expenses-2014-04-19&quot;</span>,<span class="s2">&quot;2014-04-21&quot;</span>,<span class="s2">&quot;2014-04-22&quot;</span>,<span class="s2">&quot;PyCon 2014, Montreal&quot;</span>,<span class="s2">&quot;Paid&quot;</span>,<span class="s2">&quot;Check #3992&quot;</span>
<span class="s2">&quot;sally&quot;</span>,<span class="s2">&quot;expenses-2014-09-01&quot;</span>,<span class="s2">&quot;2014-09-04&quot;</span>,<span class="s2">&quot;2014-09-04&quot;</span>,<span class="s2">&quot;Frotz project kickoff, San Jose&quot;</span>,<span class="s2">&quot;pending&quot;</span>,<span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>Sally can review a submitted expense report using the its ID
(see <a class="reference internal" href="datastore.html#show-expense-report"><em>Showing an Expense Report</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>review_expenses show sally expenses-20140901
Employee-ID: sally
Report-ID: expenses-20140901
Report-Status: pending
Created: 2014-09-04
Updated: 2014-09-04
Description: Frotz project kickoff, San Jose

<span class="s2">&quot;Date&quot;</span>,<span class="s2">&quot;Vendor&quot;</span>,<span class="s2">&quot;Type&quot;</span>,<span class="s2">&quot;Quantity&quot;</span>,<span class="s2">&quot;Price&quot;</span>,<span class="s2">&quot;Memo&quot;</span>
<span class="s2">&quot;2014-08-26&quot;</span>,<span class="s2">&quot;United Airlines&quot;</span>,<span class="s2">&quot;Travel&quot;</span>,1,425.00,<span class="s2">&quot;Airfaire, IAD &lt;-&gt; SFO&quot;</span>
<span class="s2">&quot;2014-08-27&quot;</span>,<span class="s2">&quot;Yellow Cab&quot;</span>,<span class="s2">&quot;Travel&quot;</span>,32.00,<span class="s2">&quot;Taxi to IAD&quot;</span>
...
</pre></div>
</div>
<p>While in &#8220;pending&#8221; status, Sally can edit the CSV and resubmit it
(see <a class="reference internal" href="datastore.html#update-expense-report"><em>Updating an Existing Expense Report</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>submit_expenses update expenses-20140901.csv
Updated report: sally/expenses-20140901
Processed <span class="m">15</span> rows.
</pre></div>
</div>
<p>While it remains in &#8220;pending&#8221; status, Sally can also delete the report
(see <a class="reference internal" href="datastore.html#delete-expense-report"><em>Deleting an Existing Expense Report</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>submit_expenses delete expenses-20140901
Deleted report: sally/expenses-20140901
Removed <span class="m">15</span> items.
</pre></div>
</div>
<p>Sally&#8217;s boss, Pat, can review all open expense reports
(see <a class="reference internal" href="datastore.html#list-expense-reports"><em>Listing Expense Reports</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>review_expenses list --status<span class="o">=</span>pending

<span class="s2">&quot;Employee ID&quot;</span>,<span class="s2">&quot;Report ID&quot;</span>,<span class="s2">&quot;Created&quot;</span>,<span class="s2">&quot;Updated&quot;</span>,<span class="s2">&quot;Description&quot;</span>,<span class="s2">&quot;Status&quot;</span>,<span class="s2">&quot;Memo&quot;</span>
<span class="s2">&quot;sally&quot;</span>,<span class="s2">&quot;expenses-2014-09-01&quot;</span>,<span class="s2">&quot;2014-09-04&quot;</span>,<span class="s2">&quot;2014-09-04&quot;</span>,<span class="s2">&quot;Frotz project kickoff, San Jose&quot;</span>,<span class="s2">&quot;pending&quot;</span>,<span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>Pat can download Sally&#8217;s report
(see <a class="reference internal" href="datastore.html#show-expense-report"><em>Showing an Expense Report</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>review_expenses show sally expenses-20140901
Report-ID: sally/expenses-20140901
Report-Status: pending
Employee-ID: sally
Description: Frotz project kickoff, San Jose

<span class="s2">&quot;Date&quot;</span>,<span class="s2">&quot;Vendor&quot;</span>,<span class="s2">&quot;Type&quot;</span>,<span class="s2">&quot;Quantity&quot;</span>,<span class="s2">&quot;Price&quot;</span>,<span class="s2">&quot;Memo&quot;</span>
<span class="s2">&quot;2014-08-26&quot;</span>,<span class="s2">&quot;United Airlines&quot;</span>,<span class="s2">&quot;Travel&quot;</span>,1,425.00,<span class="s2">&quot;Airfaire, IAD &lt;-&gt; SFO&quot;</span>
<span class="s2">&quot;2014-08-27&quot;</span>,<span class="s2">&quot;Yellow Cab&quot;</span>,<span class="s2">&quot;Travel&quot;</span>,32.00,<span class="s2">&quot;Taxi to IAD&quot;</span>
</pre></div>
</div>
<p>Pat can approve Sally&#8217;s expense report
(see <a class="reference internal" href="datastore.html#approve-expense-report"><em>Approving an Expense Report</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>review_expenses approve --check-number<span class="o">=</span><span class="m">4093</span> sally expenses-20140901
Approved, report: sally/expenses-20140901, check <span class="c">#4093</span>
</pre></div>
</div>
<p>or reject it
(see <a class="reference internal" href="datastore.html#reject-expense-report"><em>Rejecting an Expense Report</em></a>):</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>review_expenses reject --reason<span class="o">=</span><span class="s2">&quot;Travel not authorized by client&quot;</span> sally expenses-20140901
Rejected, report: sally/expenses-20140901, reason: Travel not authorized by client
</pre></div>
</div>
</div>
<div class="section" id="implementation-review">
<h2>Implementation Review<a class="headerlink" href="#implementation-review" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="datastore.html">Datastore Operatations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#connecting-to-the-api-dataset">Connecting to the API Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#creating-a-new-expense-report">Creating a New Expense Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#updating-an-existing-expense-report">Updating an Existing Expense Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#deleting-an-existing-expense-report">Deleting an Existing Expense Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#listing-expense-reports">Listing Expense Reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#showing-an-expense-report">Showing an Expense Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#approving-an-expense-report">Approving an Expense Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#rejecting-an-expense-report">Rejecting an Expense Report</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage Operatations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="storage.html#connecting-to-the-api-bucket">Connecting to the API Bucket</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage.html#uploading-expense-receipts">Uploading Expense Receipts</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage.html#listing-expense-receipts">Listing Expense Receipts</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage.html#downloading-expense-receipts">Downloading Expense Receipts</a></li>
<li class="toctree-l2"><a class="reference internal" href="storage.html#deleting-expense-receipts">Deleting Expense Receipts</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    </div>
  </div>
    <footer id="gc-footer" class="footer" role="contentinfo">
    <div id="gc-copyright">
        &copy; Copyright 2014, JJ Geewax.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b1.
      </div>
    </footer>
  </body>
</html>